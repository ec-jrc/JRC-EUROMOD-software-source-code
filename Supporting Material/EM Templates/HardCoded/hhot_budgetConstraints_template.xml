<Template>
  <TemplateInfo>
    <Name>HHoT - Budget Constraints</Name>
    <Title>EUROMOD Hypothetical Households</Title>
    <Subtitle>Budget Constraints</Subtitle>
    <Button>[@hhtype_selected], [baseSys]</Button>
    <Description></Description>
    <TemplateType>Default</TemplateType>
    <RequiredVariables>
      <RequiredVariable>
        <Name>idhh</Name>
        <ReadVar>idhh</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>idperson</Name>
        <ReadVar>idperson</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>weight</Name>
        <ReadVar>dwt</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>age</Name>
        <ReadVar>dag</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>ind_hhtype</Name>
        <ReadVar>sid_h</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>origy</Name>
        <ReadVar>ils_origy</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>dispy</Name>
        <ReadVar>ils_dispy</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>ben</Name>
        <ReadVar>ils_ben</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>tax</Name>
        <ReadVar>ils_tax</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>sicee</Name>
        <ReadVar>ils_sicee</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>sicse</Name>
        <ReadVar>ils_sicse</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>benmt</Name>
        <ReadVar>ils_benmt</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>bennt</Name>
        <ReadVar>ils_bennt</ReadVar>
      </RequiredVariable>
      <RequiredVariable>
        <Name>pen</Name>
        <ReadVar>ils_pen</ReadVar>
      </RequiredVariable>
    </RequiredVariables>
    <OptionalVariables>
      <OptionalVariable>
        <Name>sicot</Name>
        <ReadVar>ils_sicot</ReadVar>
        <DefaultValue>0</DefaultValue>
      </OptionalVariable>
    </OptionalVariables>
    <UserVariables>
      <UserVariable>
        <Name>hhtype_selected</Name>
        <DefaultValue>1</DefaultValue>
        <UserInputType>Numeric</UserInputType>
        <DisplayDescription>true</DisplayDescription>
      </UserVariable>
    </UserVariables>
  </TemplateInfo>
  <Globals>
    <Actions>
      <Action>
        <CalculationType>CreateOECDScale</CalculationType>
        <OutputVar>OECDscale</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateEquivalized</CalculationType>
        <OutputVar>eqDispy</OutputVar>
        <Parameters>
          <Parameter>
            <VarName>dispy</VarName>
          </Parameter>
          <Parameter>
            <Name>EquivalenceScale</Name>
            <VarName>OECDscale</VarName>
          </Parameter>
        </Parameters>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>origy</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>dispy</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>ben</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>tax</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>sicee</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>sicse</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>sicot</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>bennt</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>benmt</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>pen</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateFlag</CalculationType>
        <Filter>
          <FormulaString><![CDATA[true]]></FormulaString>
        </Filter>
        <OutputVar>persCount</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>persCount</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateHHValue</CalculationType>
        <OutputVar>ind_hhtype</OutputVar>
      </Action>
      <Action>
        <CalculationType>CreateArithmetic</CalculationType>
        <CalculationLevel>Household</CalculationLevel>
        <OutputVar>hhtype</OutputVar>
        <FormulaString><![CDATA[OBS_VAR[@hhtype] / OBS_VAR[@persCount]]]></FormulaString>
        <Parameters>
          <Parameter>
            <Name>hhtype</Name>
            <VarName>ind_hhtype</VarName>
          </Parameter>
          <Parameter>
            <Name>persCount</Name>
            <VarName>persCount</VarName>
          </Parameter>
        </Parameters>
      </Action>
    </Actions>
  </Globals>
	<Pages>
		<Page>
      <Name>BudgetConstraints</Name>
      <Title>Household Budget Constraints, [@hhtype_selected]</Title>
      <Subtitle>[baseSys]</Subtitle>
      <Button>[@hhtype_selected], [baseSys]</Button>
      <Tables>
				<Table>
          <Graph>
            <Title>Household Budget Constraints</Title>
            <ShowTable>false</ShowTable>
            <SeriesInRows>false</SeriesInRows>
            <AxisX>
              <ValuesFrom>Original income</ValuesFrom>
              <Label>Original Income</Label>
              <Interval>500</Interval>
            </AxisX>
            <AxisY>
              <Label>Incomes</Label>
            </AxisY>
            <Legend>
              <Docking>Right</Docking>
            </Legend>
            <Series>
              <Serie>
                <Visible>false</Visible>
                <Name>Original income</Name>
                <Type>Line</Type>
                <Colour>Orange</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Means-tested non-pension benefits</Name>
                <Type>Line</Type>
                <Colour>Green</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Non-means-tested non-pension benefits</Name>
                <Type>Line</Type>
                <Colour>LightGreen</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Pensions</Name>
                <Type>Line</Type>
                <Colour>DarkGreen</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Direct taxes</Name>
                <Type>Line</Type>
                <Colour>Blue</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Employee social insurance contributions</Name>
                <Type>Line</Type>
                <Colour>DarkBlue</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Self-employed social insurance contributions</Name>
                <Type>Line</Type>
                <Colour>Cyan</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Other social insurance contributions</Name>
                <Type>Line</Type>
                <Colour>LightBlue</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Disposable income</Name>
                <Type>Line</Type>
                <Colour>Red</Colour>
                <Size>2</Size>
              </Serie>
              <Serie>
                <Name>Equivalised disposable income</Name>
                <Type>Line</Type>
                <Colour>DarkRed</Colour>
                <Size>2</Size>
              </Serie>
            </Series>
          </Graph>
          <Action>
            <CalculationLevel>Household</CalculationLevel>
            <CalculationType>CalculateWeightedAverage</CalculationType>
            <FormulaString><![CDATA[OP_VAR[@Var]]]></FormulaString>
          </Action>
          <Columns>
            <Column>
              <Name>Original income</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>origy</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Means-tested non-pension benefits</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>benmt</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Non-means-tested non-pension benefits</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>bennt</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Pensions</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>pen</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Direct taxes</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>tax</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Employee social insurance contributions</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>sicee</VarName>
                  </Parameter>
                  <Parameter>
                    <Name>PosNeg</Name>
                    <VarName>neg</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Self-employed social insurance contributions</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>sicse</VarName>
                  </Parameter>
                  <Parameter>
                    <Name>PosNeg</Name>
                    <VarName>neg</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Other social insurance contributions</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>sicot</VarName>
                  </Parameter>
                  <Parameter>
                    <Name>PosNeg</Name>
                    <VarName>neg</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Disposable income</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>dispy</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
            <Column>
              <Name>Equivalised disposable income</Name>
              <Action>
                <Parameters>
                  <Parameter>
                    <Name>Var</Name>
                    <VarName>eqDispy</VarName>
                  </Parameter>
                </Parameters>
              </Action>
            </Column>
          </Columns>
          <Rows>
            <Row>
              <Name></Name>
              <ForEachDataRow>true</ForEachDataRow>
              <Action>
                <Filter>
                  <FormulaString><![CDATA[OBS_VAR[@hhtype] == USR_VAR[@hhtype_selected]]]></FormulaString>
                  <Parameters>
                    <Parameter>
                      <Name>hhtype</Name>
                      <VarName>hhtype</VarName>
                    </Parameter>
                    <Parameter>
                      <Name>hhtype_selected</Name>
                      <VarName>hhtype_selected</VarName>
                    </Parameter>
                  </Parameters>
                </Filter>
              </Action>
            </Row>
          </Rows>
				</Table>
			</Tables>
		</Page>
	</Pages>
</Template>